[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath(".:rotation")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath("MovementComponent:current_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("MovementComponent:last_state")
properties/5/spawn = true
properties/5/replication_mode = 2

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(0, 0.39923018, -0.03963051)
bones/0/rotation = Quaternion(0.29617646, 0, 0, 0.9551332)
bones/1/rotation = Quaternion(-0.06447644, 4.1028533e-10, 6.350076e-09, 0.99791926)
bones/2/rotation = Quaternion(-0.07746046, -0.0051606838, 7.213102e-05, 0.9969821)
bones/3/rotation = Quaternion(-0.0016619922, -0.015451401, -0.00035362187, 0.9998792)
bones/4/rotation = Quaternion(0.043580912, 0.010306472, -8.705807e-05, 0.99899673)
bones/5/rotation = Quaternion(-0.11464835, -7.491554e-10, -1.00841866e-07, 0.99340624)
bones/6/rotation = Quaternion(-0.029624231, 0.0100753065, 0.0021703935, 0.99950796)
bones/7/rotation = Quaternion(0.9792515, 0.20264325, 0.001506567, -3.8996313e-05)
bones/8/rotation = Quaternion(0.99589664, -0.09048621, -0.0014924699, -0.00020927266)
bones/9/rotation = Quaternion(0.8428376, 1.19829595e-08, 1.1982842e-08, 0.5381681)
bones/10/rotation = Quaternion(0.40984628, -9.836313e-09, 9.282453e-09, 0.9121546)
bones/11/rotation = Quaternion(0.81617635, 0.14458632, -0.21031097, 0.51838243)
bones/12/rotation = Quaternion(0.40983695, -0.011632544, 0.0028934798, 0.91208005)
bones/13/rotation = Quaternion(0.8161764, -0.1445863, 0.21031094, 0.5183824)
bones/14/rotation = Quaternion(0.409837, 0.011632555, -0.0028934833, 0.91208005)
bones/15/rotation = Quaternion(-0.3230371, -0.16148067, -0.5642791, 0.7424016)
bones/16/rotation = Quaternion(8.085669e-08, 1.1658926e-07, 0.031393647, 0.9995072)
bones/17/rotation = Quaternion(-0.3230371, 0.16148064, 0.5642791, 0.7424016)
bones/18/rotation = Quaternion(8.12364e-08, -1.1601969e-07, -0.031393647, 0.9995072)
bones/19/rotation = Quaternion(-0.3955509, -0.11320286, -0.21625136, 0.88541514)
bones/20/rotation = Quaternion(-1.8852137e-07, -1.612629e-08, 0.031393573, 0.9995072)
bones/21/rotation = Quaternion(-0.3955509, 0.11320286, 0.21625133, 0.88541514)
bones/22/rotation = Quaternion(-2.0340767e-07, 1.0440623e-08, -0.03139357, 0.9995072)
bones/23/rotation = Quaternion(-0.57975745, -0.3826164, -0.39648923, 0.6002352)
bones/24/rotation = Quaternion(-0.1516819, 0.6858391, -0.32879868, 0.6312755)
bones/25/position = Vector3(-1.2744567e-07, 0.06935192, 4.3772168e-08)
bones/25/rotation = Quaternion(1.06283025e-07, 0.001172082, -3.3397023e-07, 0.99999934)
bones/26/position = Vector3(-5.7101683e-08, 0.06935187, 1.9973467e-09)
bones/26/rotation = Quaternion(0.60651356, 0.001171909, -0.0008299287, 0.7950719)
bones/27/position = Vector3(1.284061e-07, 0.064119756, -1.2572859e-08)
bones/27/rotation = Quaternion(1.490116e-08, 1.0128133e-08, -6.461051e-09, 1)
bones/28/position = Vector3(1.05108946e-07, 0.06411976, 3.6951961e-09)
bones/28/rotation = Quaternion(-0.002563828, 0.00013444912, 0.05185603, 0.99865127)
bones/30/rotation = Quaternion(0.5862048, -0.072815366, -0.15849784, 0.7911639)
bones/31/rotation = Quaternion(0.42265278, -0.00030024204, -0.0010019311, 0.9062912)
bones/32/rotation = Quaternion(0.42477843, 0.00065156486, 0.0016324768, 0.9052957)
bones/33/rotation = Quaternion(-0.04327888, 0.82237375, 0.41886076, 0.38260183)
bones/34/rotation = Quaternion(0.60595334, -0.051935602, 0.05264398, 0.7920556)
bones/35/rotation = Quaternion(0.49004638, -0.012869137, -0.025310647, 0.8712339)
bones/37/rotation = Quaternion(0.5944044, -0.07682514, -0.07729954, 0.7967472)
bones/38/rotation = Quaternion(0.42502707, 0.00022637408, 0.00073747087, 0.9051804)
bones/39/rotation = Quaternion(0.42479074, -0.0004844689, -0.0012023335, 0.9052907)
bones/41/rotation = Quaternion(0.60418266, 0.02097488, -0.020213027, 0.7963132)
bones/42/rotation = Quaternion(0.49698335, -7.684972e-05, -0.00018717491, 0.8677601)
bones/43/rotation = Quaternion(0.4980186, 0.00015309674, 0.00030398607, 0.86716634)
bones/45/rotation = Quaternion(0.6082473, 0.03502511, 0.05230329, 0.79124767)
bones/46/rotation = Quaternion(0.51049423, 1.15413995e-05, 4.8875456e-05, 0.8598813)
bones/47/rotation = Quaternion(0.514301, -3.9163435e-05, -7.184281e-05, 0.8576098)
bones/49/rotation = Quaternion(-0.20017987, -0.69452125, 0.27652133, 0.63332796)
bones/50/position = Vector3(1.3000681e-07, 0.06935173, 1.8626616e-09)
bones/50/rotation = Quaternion(7.7589746e-08, -0.011189689, -7.046053e-08, 0.9999374)
bones/51/position = Vector3(5.5704678e-08, 0.06935182, -6.0929013e-09)
bones/51/rotation = Quaternion(0.12842207, -0.01119214, 0.0014037574, 0.9916555)
bones/52/position = Vector3(-2.561138e-09, 0.06411973, -7.962808e-08)
bones/52/rotation = Quaternion(2.421439e-07, -7.858035e-08, -2.720044e-07, 1)
bones/53/position = Vector3(9.82361e-08, 0.06411974, 3.5444494e-08)
bones/53/rotation = Quaternion(-0.0025639415, -0.00013441381, -0.051855873, 0.99865127)
bones/55/position = Vector3(-0.007881464, 0.12677762, 0.022745082)
bones/55/rotation = Quaternion(0.63493484, 0.08099396, 0.12939142, 0.75733453)
bones/56/rotation = Quaternion(0.4223328, 0.037718747, -0.016448792, 0.9055063)
bones/57/rotation = Quaternion(0.424779, -0.00065291964, -0.0016323116, 0.9052955)
bones/58/rotation = Quaternion(0.043278348, 0.8223737, 0.4188611, -0.38260186)
bones/59/rotation = Quaternion(0.6059534, 0.051935937, -0.05264364, 0.7920555)
bones/60/rotation = Quaternion(0.49004653, 0.012869162, 0.02531055, 0.87123364)
bones/62/position = Vector3(-0.0056191357, 0.1261708, 0.0233236)
bones/62/rotation = Quaternion(0.6424864, 0.08036379, 0.05289738, 0.7602334)
bones/63/rotation = Quaternion(0.42466244, 0.035699837, -0.017606309, 0.90447634)
bones/64/rotation = Quaternion(0.42479104, 0.0004847716, 0.0012023079, 0.90529054)
bones/66/position = Vector3(-0.008360775, 0.12714148, 0.022695478)
bones/66/rotation = Quaternion(0.65334606, -0.020643324, 0.0012980326, 0.7567768)
bones/67/rotation = Quaternion(0.49661887, 0.033620566, -0.019024558, 0.8671087)
bones/68/rotation = Quaternion(0.49801892, -0.00015196232, -0.00030493387, 0.86716616)
bones/70/position = Vector3(-0.00570162, 0.12279522, 0.022938011)
bones/70/rotation = Quaternion(0.6573626, -0.03892861, -0.06508319, 0.74974877)
bones/71/rotation = Quaternion(0.5101899, 0.029604483, -0.017630368, 0.85937124)
bones/72/rotation = Quaternion(0.51430094, 3.896993e-05, 7.225967e-05, 0.85760987)
bones/74/rotation = Quaternion(0.78233296, 0.24861595, -0.17112601, 0.5448497)
bones/75/rotation = Quaternion(0.7823329, -0.24861604, 0.17112593, 0.54484975)
bones/76/rotation = Quaternion(0.76205796, 5.9757893e-10, 7.4063085e-09, -0.6475088)
bones/77/rotation = Quaternion(-0.11416653, 0.001300916, -0.022103826, 0.99321485)
bones/78/rotation = Quaternion(-0.16743197, 0.0068537914, -0.06300666, 0.9838444)
bones/81/rotation = Quaternion(0.384113, 0.041868176, -0.027114157, 0.9219377)
bones/82/position = Vector3(-8.884226e-09, 0.092872955, 8.160138e-09)
bones/82/rotation = Quaternion(1.2052949e-07, -0.0134286275, 4.407028e-09, 0.9999099)
bones/83/position = Vector3(6.2061245e-09, 0.0928729, 7.054677e-08)
bones/83/rotation = Quaternion(0.94810444, -0.013430329, 0.039736573, 0.31518057)
bones/84/position = Vector3(-1.2562069e-08, 0.09053984, 1.4091389e-08)
bones/84/rotation = Quaternion(-9.8540944e-08, -0.013847048, 7.385064e-09, 0.99990416)
bones/85/position = Vector3(-1.1732482e-10, 0.090539776, 2.1928013e-08)
bones/85/rotation = Quaternion(-0.19844, 0.023907097, -0.042964116, 0.97887903)
bones/86/position = Vector3(-6.246199e-09, 0.2241696, -2.8520098e-08)
bones/86/rotation = Quaternion(5.6905293e-07, 0.95408976, -0.2995211, 5.0002006e-07)
bones/87/rotation = Quaternion(0.9060767, -0.009929248, 0.03838512, 0.42125174)
bones/88/position = Vector3(-1.0884618e-09, 0.09239511, -9.890389e-09)
bones/88/rotation = Quaternion(6.461978e-08, -0.0013582205, 2.6367179e-08, 0.99999917)
bones/89/position = Vector3(-1.16908705e-08, 0.09239509, -9.857738e-09)
bones/89/rotation = Quaternion(0.80464435, -0.0013584513, 0.0018850261, 0.59375256)
bones/90/position = Vector3(-2.9676492e-09, 0.09058876, -2.273631e-09)
bones/90/rotation = Quaternion(-1.5463657e-07, -0.0031975908, -1.9380947e-08, 0.9999949)
bones/91/position = Vector3(-6.1840053e-09, 0.09058877, -2.3641807e-08)
bones/91/rotation = Quaternion(-0.7931543, -0.033866208, 0.010016027, 0.6079959)
bones/92/position = Vector3(-1.556068e-08, 0.22412647, 1.0184385e-08)
bones/92/rotation = Quaternion(-3.3029966e-08, 0.95411783, -0.29943174, -7.1553626e-07)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchonizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")
move_direction = null
target_angle = null

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
