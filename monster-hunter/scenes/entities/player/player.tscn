[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:player_id")
properties/6/spawn = true
properties/6/replication_mode = 0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(0.013664189, 0.4962853, -0.008685768)
bones/0/rotation = Quaternion(0.12651491, 0.047910165, 0.012765134, 0.99072486)
bones/2/rotation = Quaternion(-0.07745912, -0.0020825309, 2.9125411e-05, 0.9969934)
bones/3/rotation = Quaternion(-0.001664026, -0.0062628603, -0.00014332907, 0.999979)
bones/4/rotation = Quaternion(0.14777254, 0.0041326783, -0.00046971167, 0.9890127)
bones/6/rotation = Quaternion(-0.015841624, 0.004177095, -6.617542e-05, 0.9998658)
bones/7/rotation = Quaternion(0.9923426, 0.11464802, -0.003772791, -0.045800835)
bones/8/rotation = Quaternion(0.9923585, -0.11451052, -0.006763873, 0.045455396)
bones/9/rotation = Quaternion(0.8422683, 0.03097403, -0.019777495, 0.53780454)
bones/10/rotation = Quaternion(0.40907958, -0.025057256, 0.055767443, 0.9104483)
bones/11/rotation = Quaternion(0.8103115, 0.17448285, -0.22921926, 0.5103034)
bones/12/rotation = Quaternion(0.40835914, -0.036667455, 0.05865095, 0.9101969)
bones/13/rotation = Quaternion(0.8209385, -0.11449437, 0.1911185, 0.5257611)
bones/14/rotation = Quaternion(0.4097815, -0.013445863, 0.052874863, 0.9105508)
bones/15/rotation = Quaternion(-0.35755116, -0.050853923, -0.30009314, 0.88290155)
bones/16/rotation = Quaternion(5.790974e-08, 9.607031e-08, -0.084641024, 0.9964115)
bones/17/rotation = Quaternion(-0.33655918, 0.1309842, 0.49336845, 0.79130197)
bones/18/rotation = Quaternion(2.7904779e-08, -8.642752e-08, -0.08464126, 0.9964115)
bones/19/rotation = Quaternion(-0.4110412, 0.01790517, 0.075313024, 0.90832406)
bones/20/rotation = Quaternion(-1.9898512e-07, -4.6631435e-08, -0.08464116, 0.9964115)
bones/21/rotation = Quaternion(-0.40430897, 0.07622139, 0.13362926, 0.90159184)
bones/22/rotation = Quaternion(-1.6939597e-07, 2.546649e-08, -0.08464114, 0.9964115)
bones/24/rotation = Quaternion(-0.22370826, 0.63312304, -0.4949859, 0.5514516)
bones/25/rotation = Quaternion(3.5293954e-08, -0.0149452025, 2.0748756e-08, 0.9998884)
bones/26/rotation = Quaternion(0.35129246, -0.014945579, 0.0056211045, 0.9361297)
bones/27/rotation = Quaternion(-6.6783606e-08, 0.0011663546, 5.392098e-08, 0.9999994)
bones/28/rotation = Quaternion(0.06519458, 0.0018987454, 0.05184217, 0.99652326)
bones/49/rotation = Quaternion(-0.31868988, -0.6533158, 0.40012705, 0.5581341)
bones/50/rotation = Quaternion(3.3945028e-08, -0.015196321, -7.7179486e-08, 0.9998846)
bones/51/rotation = Quaternion(0.2552724, -0.015196344, 0.004011255, 0.96674144)
bones/52/rotation = Quaternion(-3.1820544e-08, 0.0011666425, -8.5485105e-08, 0.9999994)
bones/53/rotation = Quaternion(-0.070310146, 0.0016304493, -0.051869422, 0.9961744)
bones/81/rotation = Quaternion(0.9750807, 0.057314023, -0.047488425, 0.2089921)
bones/82/rotation = Quaternion(-2.8094451e-08, -0.060947947, 1.2789125e-09, 0.99814105)
bones/83/rotation = Quaternion(0.20865023, -0.061064407, 0.013054318, 0.97599477)
bones/84/rotation = Quaternion(-1.4265855e-08, -0.008674004, 5.5713084e-08, 0.99996245)
bones/85/rotation = Quaternion(-0.5396553, 0.026393237, 0.069273755, 0.838616)
bones/86/rotation = Quaternion(1.6922448e-05, 0.9490813, -0.31503147, -4.9168266e-06)
bones/87/rotation = Quaternion(0.9555625, -0.14989138, 0.062271018, 0.24607992)
bones/88/rotation = Quaternion(7.217416e-08, 0.05021158, -9.411116e-08, 0.99873865)
bones/89/rotation = Quaternion(0.32120463, 0.050180577, -0.017046874, 0.9455258)
bones/90/rotation = Quaternion(4.307232e-08, 0.061476845, -4.967193e-08, 0.9981085)
bones/91/rotation = Quaternion(-0.54913783, 0.026667602, -0.11874931, 0.82682234)
bones/92/rotation = Quaternion(-2.5327618e-05, 0.93685037, -0.34973046, 8.754561e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
