[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(-0.0065832157, 0.49629548, -0.008653602)
bones/0/rotation = Quaternion(0.12617317, -0.021152345, -0.019612467, 0.99158883)
bones/2/rotation = Quaternion(-0.077436246, 0.016492115, -0.00023073972, 0.996861)
bones/3/rotation = Quaternion(-0.0016453047, 0.04936163, 0.0011297317, 0.998779)
bones/4/rotation = Quaternion(0.14769341, -0.032722276, 0.0037190919, 0.9884848)
bones/6/rotation = Quaternion(-0.015833259, -0.032929078, 0.0005217819, 0.99933225)
bones/7/rotation = Quaternion(0.99323183, 0.11465294, 0.0036212397, 0.018225996)
bones/8/rotation = Quaternion(0.9932254, -0.114708416, 0.0006275154, -0.018571747)
bones/9/rotation = Quaternion(0.842745, -0.012488486, 0.007974162, 0.538109)
bones/10/rotation = Quaternion(0.40886608, 0.02832854, -0.06304806, 0.9099731)
bones/11/rotation = Quaternion(0.81822914, 0.13247697, -0.20260687, 0.52144164)
bones/12/rotation = Quaternion(0.40966082, 0.016723132, -0.06015643, 0.9100987)
bones/13/rotation = Quaternion(0.8139444, -0.15666388, 0.21796882, 0.5152092)
bones/14/rotation = Quaternion(0.40805274, 0.03993265, -0.06592951, 0.9096987)
bones/15/rotation = Quaternion(-0.34082448, -0.119447365, -0.46613607, 0.80764365)
bones/16/rotation = Quaternion(5.7925885e-08, 7.18936e-08, 0.11751376, 0.9930713)
bones/17/rotation = Quaternion(-0.35561213, 0.06300018, 0.32998464, 0.87217045)
bones/18/rotation = Quaternion(3.605352e-08, -1.0220921e-07, 0.117513485, 0.9930713)
bones/19/rotation = Quaternion(-0.40667006, -0.062409203, -0.10284974, 0.9056195)
bones/20/rotation = Quaternion(-2.2460917e-07, 6.1895555e-10, 0.117513664, 0.9930713)
bones/21/rotation = Quaternion(-0.41141248, -0.0038975347, -0.044338085, 0.9103619)
bones/22/rotation = Quaternion(-2.6104945e-07, 3.7155107e-08, 0.11751362, 0.9930714)
bones/24/rotation = Quaternion(-0.34601593, 0.6581196, -0.36618423, 0.5595182)
bones/25/rotation = Quaternion(-2.0929381e-08, 0.02537799, -1.0858682e-07, 0.99967796)
bones/26/rotation = Quaternion(0.106433064, 0.02537818, -0.0027140465, 0.99399227)
bones/27/rotation = Quaternion(5.897661e-09, -0.001414107, 4.466816e-08, 0.99999905)
bones/28/rotation = Quaternion(-0.0616851, -0.0014052582, 0.05186758, 0.9967461)
bones/49/rotation = Quaternion(-0.19013913, -0.6249806, 0.5218599, 0.5485513)
bones/50/rotation = Quaternion(1.4244678e-07, 0.024787134, -2.0808366e-07, 0.9996928)
bones/51/rotation = Quaternion(0.3145168, 0.024787182, -0.008215905, 0.9488927)
bones/52/rotation = Quaternion(-1.0029026e-07, -0.0014138431, 1.1277332e-08, 0.99999905)
bones/53/rotation = Quaternion(0.05656666, -0.0016737949, -0.05184392, 0.99705046)
bones/81/rotation = Quaternion(0.9565028, 0.14000592, -0.060689915, 0.2486314)
bones/82/rotation = Quaternion(-5.5184508e-08, -0.051677074, -8.3234035e-08, 0.9986639)
bones/83/rotation = Quaternion(0.3119629, -0.051654346, 0.016988378, 0.94853705)
bones/84/rotation = Quaternion(-1.9460408e-08, -0.04567352, 3.6947974e-08, 0.9989565)
bones/85/rotation = Quaternion(-0.55718666, -0.010788932, 0.10281479, 0.82392704)
bones/86/rotation = Quaternion(2.587569e-05, 0.9406377, -0.33941224, -8.6440805e-06)
bones/87/rotation = Quaternion(0.9729517, -0.068852834, 0.04935047, 0.21491572)
bones/88/rotation = Quaternion(5.5829602e-08, 0.05985965, -4.4397552e-08, 0.99820685)
bones/89/rotation = Quaternion(0.22997999, 0.059895888, -0.014182558, 0.9712469)
bones/90/rotation = Quaternion(6.5664754e-09, 0.024246996, -1.9277875e-08, 0.99970603)
bones/91/rotation = Quaternion(-0.53779113, -0.010826943, -0.08044181, 0.8391619)
bones/92/rotation = Quaternion(-2.0873416e-05, 0.94556713, -0.32542711, 6.4662386e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")
move_direction = null
target_angle = null

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
