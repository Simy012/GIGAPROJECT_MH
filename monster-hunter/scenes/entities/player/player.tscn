[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:player_id")
properties/6/spawn = true
properties/6/replication_mode = 0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:input_data")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("CamPivot/SpringArm3D/Camera3D:position")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("CamPivot/SpringArm3D/Camera3D:rotation")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("PlayerInput:camera_global_basis")
properties/3/spawn = true
properties/3/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(-0.013550926, 0.4962855, -0.008685855)
bones/0/rotation = Quaternion(0.12651263, -0.047478467, -0.012901429, 0.9907442)
bones/2/rotation = Quaternion(-0.07746086, 0.0023301134, -3.260111e-05, 0.99699277)
bones/3/rotation = Quaternion(-0.0016639739, 0.0070342426, 0.00016098648, 0.99997395)
bones/4/rotation = Quaternion(0.14777215, -0.004622656, 0.0005254679, 0.9890105)
bones/6/rotation = Quaternion(-0.015841667, -0.0046918523, 7.433778e-05, 0.99986356)
bones/7/rotation = Quaternion(0.9923787, 0.11451354, 0.006712819, 0.04501294)
bones/8/rotation = Quaternion(0.9923629, -0.1146497, 0.003721675, -0.045358386)
bones/9/rotation = Quaternion(0.8422792, -0.030673582, 0.019585697, 0.5378115)
bones/10/rotation = Quaternion(0.4090743, 0.02514319, -0.055958726, 0.9104365)
bones/11/rotation = Quaternion(0.82089764, 0.11478718, -0.19130601, 0.5256928)
bones/12/rotation = Quaternion(0.4097787, 0.013531967, -0.053066205, 0.91053957)
bones/13/rotation = Quaternion(0.8103737, -0.17419381, 0.22903724, 0.51038516)
bones/14/rotation = Quaternion(0.40835142, 0.036753237, -0.05884222, 0.91018456)
bones/15/rotation = Quaternion(-0.3366238, -0.13081807, -0.49297783, 0.79154533)
bones/16/rotation = Quaternion(3.4909277e-08, 9.1292044e-08, 0.08530823, 0.9963547)
bones/17/rotation = Quaternion(-0.357526, 0.051030364, 0.3005288, 0.8827534)
bones/18/rotation = Quaternion(3.6556436e-08, -9.8667186e-08, 0.08530804, 0.99635464)
bones/19/rotation = Quaternion(-0.40434653, -0.07602184, -0.1331843, 0.90165776)
bones/20/rotation = Quaternion(-1.9731206e-07, -1.4963117e-08, 0.08530814, 0.99635464)
bones/21/rotation = Quaternion(-0.41105, -0.017702315, -0.07486475, 0.90836114)
bones/22/rotation = Quaternion(-1.7099295e-07, 4.3542595e-08, 0.085308135, 0.99635464)
bones/24/rotation = Quaternion(-0.31923056, 0.65341604, -0.39948964, 0.5581644)
bones/25/rotation = Quaternion(7.123882e-09, 0.015563946, 1.40008e-07, 0.9998789)
bones/26/rotation = Quaternion(0.14645734, 0.01556434, -0.0022930983, 0.98909193)
bones/27/rotation = Quaternion(-1.7306793e-09, -0.0017576509, 6.3827557e-09, 0.99999845)
bones/28/rotation = Quaternion(-0.07023321, -0.0016285132, 0.05186929, 0.9961799)
bones/49/rotation = Quaternion(-0.22307625, -0.632974, 0.49551967, 0.5513993)
bones/50/rotation = Quaternion(4.2004626e-08, 0.015249717, -7.46764e-08, 0.9998838)
bones/51/rotation = Quaternion(0.3110713, 0.015249675, -0.0049933395, 0.95025116)
bones/52/rotation = Quaternion(-2.3324394e-09, -0.0017572952, -3.8439424e-08, 0.99999845)
bones/53/rotation = Quaternion(0.065117426, -0.0018968118, -0.05184201, 0.9965283)
bones/81/rotation = Quaternion(0.95556384, 0.14976278, -0.06225029, 0.24615821)
bones/82/rotation = Quaternion(4.9460112e-08, -0.050234925, -1.07407505e-08, 0.9987375)
bones/83/rotation = Quaternion(0.3211077, -0.050200205, 0.017047819, 0.94555765)
bones/84/rotation = Quaternion(2.9243294e-09, -0.061221212, 3.290522e-08, 0.99812424)
bones/85/rotation = Quaternion(-0.5493001, -0.026412796, 0.11848719, 0.8267603)
bones/86/rotation = Quaternion(2.5385914e-05, 0.93691295, -0.3495631, -8.7585295e-06)
bones/87/rotation = Quaternion(0.975047, -0.057475895, 0.047514565, 0.20909868)
bones/88/rotation = Quaternion(4.3925905e-08, 0.060967885, -2.4521482e-08, 0.99813974)
bones/89/rotation = Quaternion(0.20901562, 0.061038148, -0.013071754, 0.975918)
bones/90/rotation = Quaternion(-5.2050897e-08, 0.00892662, 1.573355e-08, 0.99996024)
bones/91/rotation = Quaternion(-0.5396295, -0.026140703, -0.06944027, 0.8386268)
bones/92/rotation = Quaternion(-1.6900065e-05, 0.94902486, -0.31520137, 4.90008e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("camera_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
camera_component = NodePath("../CamPivot")

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
