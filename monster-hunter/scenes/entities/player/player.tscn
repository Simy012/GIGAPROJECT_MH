[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:player_id")
properties/6/spawn = true
properties/6/replication_mode = 0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(-0.0069699404, 0.4962915, -0.008483173)
bones/0/rotation = Quaternion(0.12507309, -0.028900746, 0.024666205, 0.9914198)
bones/2/rotation = Quaternion(-0.07732825, -0.036486693, 0.00051281584, 0.9963377)
bones/3/rotation = Quaternion(-0.0015703066, -0.10905296, -0.0024965922, 0.99403155)
bones/4/rotation = Quaternion(0.1473814, 0.07235625, -0.008223784, 0.9863953)
bones/6/rotation = Quaternion(-0.015799785, 0.07281276, -0.0011535886, 0.99721986)
bones/7/rotation = Quaternion(0.99290276, 0.11459485, 0.0051417067, 0.031398814)
bones/8/rotation = Quaternion(0.9928917, -0.11468999, 0.0021489675, -0.031744435)
bones/9/rotation = Quaternion(0.84256506, -0.021430554, 0.0136838425, 0.5379941)
bones/10/rotation = Quaternion(0.40909746, -0.024763932, 0.05511466, 0.91048807)
bones/11/rotation = Quaternion(0.8195889, 0.123786874, -0.1970622, 0.52356225)
bones/12/rotation = Quaternion(0.40838534, -0.03637472, 0.05799828, 0.91023874)
bones/13/rotation = Quaternion(0.81223613, -0.16529216, 0.22342369, 0.5128672)
bones/14/rotation = Quaternion(0.4097909, -0.013151984, 0.05222205, 0.91058844)
bones/15/rotation = Quaternion(-0.34971058, -0.090174556, -0.39611208, 0.8441956)
bones/16/rotation = Quaternion(3.8584364e-08, 1.1912294e-07, -0.13827172, 0.99039435)
bones/17/rotation = Quaternion(-0.34900454, 0.0928699, 0.40261334, 0.8411146)
bones/18/rotation = Quaternion(4.281758e-08, -9.025542e-08, -0.1382719, 0.99039435)
bones/19/rotation = Quaternion(-0.41049284, -0.027768482, -0.025837447, 0.9110747)
bones/20/rotation = Quaternion(-1.9576954e-07, -5.6778767e-08, -0.13827182, 0.9903944)
bones/21/rotation = Quaternion(-0.41026637, 0.030934623, 0.03286564, 0.91084826)
bones/22/rotation = Quaternion(-1.588695e-07, -4.3412864e-09, -0.13827176, 0.99039435)
bones/24/rotation = Quaternion(-0.15591638, 0.6162525, -0.5463446, 0.5453722)
bones/25/rotation = Quaternion(6.361586e-08, -0.033352908, -2.35832e-07, 0.9994437)
bones/26/rotation = Quaternion(0.4134587, -0.03365445, 0.015294441, 0.9097722)
bones/27/rotation = Quaternion(-1.2431805e-07, 0.0007021258, 4.655825e-08, 0.99999976)
bones/28/rotation = Quaternion(0.026073547, 0.00087963435, 0.051850367, 0.9983141)
bones/49/rotation = Quaternion(-0.37113696, -0.6620077, 0.331402, 0.56051403)
bones/50/rotation = Quaternion(1.9979655e-08, -0.034227513, -4.9048065e-08, 0.9994141)
bones/51/rotation = Quaternion(0.25551224, -0.034657277, 0.009166438, 0.966141)
bones/52/rotation = Quaternion(8.383543e-08, 0.0007024031, -2.8878364e-07, 0.99999976)
bones/53/rotation = Quaternion(-0.031199027, 0.0006106778, -0.05186176, 0.9981666)
bones/81/rotation = Quaternion(0.96860313, 0.097465105, -0.053957045, 0.22225514)
bones/82/rotation = Quaternion(1.826979e-08, -0.056706205, 1.4182071e-08, 0.9983909)
bones/83/rotation = Quaternion(0.26751426, -0.05670674, 0.015769975, 0.96175456)
bones/84/rotation = Quaternion(2.5213382e-08, -0.052898183, 2.3349793e-08, 0.99859995)
bones/85/rotation = Quaternion(-0.5324992, -0.017793717, 0.10572231, 0.83961344)
bones/86/rotation = Quaternion(3.1280873e-05, 0.938829, -0.34438384, -1.0787748e-05)
bones/87/rotation = Quaternion(0.96230423, -0.1121338, 0.056260444, 0.24131192)
bones/88/rotation = Quaternion(1.3208481e-08, 0.055446092, -1.2805098e-08, 0.9984617)
bones/89/rotation = Quaternion(0.27731586, 0.05544914, -0.016032634, 0.9590434)
bones/90/rotation = Quaternion(5.7563856e-08, 0.016523477, -5.2573515e-08, 0.9998635)
bones/91/rotation = Quaternion(-0.56358397, -0.018232351, -0.076268315, 0.8223283)
bones/92/rotation = Quaternion(-1.993691e-05, 0.9472821, -0.3204009, 6.0352663e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
