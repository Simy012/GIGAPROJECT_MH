[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath(".:rotation")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath("MovementComponent:current_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("MovementComponent:last_state")
properties/5/spawn = true
properties/5/replication_mode = 2

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(-0.0027740102, 0.49629456, -0.00853885)
bones/0/rotation = Quaternion(0.12540698, -0.013598357, 0.02411749, 0.991719)
bones/2/rotation = Quaternion(-0.0773639, -0.031326782, 0.0004396592, 0.9965106)
bones/3/rotation = Quaternion(-0.0015950636, -0.0936743, -0.0021443325, 0.9955993)
bones/4/rotation = Quaternion(0.14748447, 0.062134556, -0.007061952, 0.9870856)
bones/6/rotation = Quaternion(-0.015810864, 0.062526405, -0.0009906122, 0.99791765)
bones/7/rotation = Quaternion(0.9932661, 0.11465993, 0.0033931965, 0.016250486)
bones/8/rotation = Quaternion(0.99326044, -0.11470942, 0.0003989368, -0.01659253)
bones/9/rotation = Quaternion(0.8427639, -0.011145055, 0.007116353, 0.538121)
bones/10/rotation = Quaternion(0.40895122, -0.027073232, 0.06025423, 0.9101623)
bones/11/rotation = Quaternion(0.818017, 0.13378115, -0.2034379, 0.5211181)
bones/12/rotation = Quaternion(0.40817335, -0.03867978, 0.063136406, 0.9098968)
bones/13/rotation = Quaternion(0.81419307, -0.1553662, 0.21714729, 0.5155561)
bones/14/rotation = Quaternion(0.40971026, -0.015465449, 0.05736216, 0.9102791)
bones/15/rotation = Quaternion(-0.3518705, -0.081339285, -0.37472734, 0.85390306)
bones/16/rotation = Quaternion(2.2400897e-08, 9.9493676e-08, -0.13802375, 0.9904289)
bones/17/rotation = Quaternion(-0.34655505, 0.1016293, 0.4236672, 0.8307088)
bones/18/rotation = Quaternion(2.2626256e-08, -8.114049e-08, -0.13802388, 0.9904289)
bones/19/rotation = Quaternion(-0.4110619, -0.017422335, -0.002885907, 0.91143644)
bones/20/rotation = Quaternion(-1.9917698e-07, -6.325252e-08, -0.13802382, 0.990429)
bones/21/rotation = Quaternion(-0.40935716, 0.041256435, 0.055792857, 0.9097317)
bones/22/rotation = Quaternion(-2.783089e-07, -4.376152e-09, -0.13802378, 0.9904289)
bones/24/rotation = Quaternion(-0.16200349, 0.6178344, -0.5421909, 0.54595286)
bones/25/rotation = Quaternion(3.4099887e-08, -0.03200713, -1.9039982e-07, 0.9994877)
bones/26/rotation = Quaternion(0.41291517, -0.032007135, 0.014522391, 0.9100911)
bones/27/rotation = Quaternion(-1.2021569e-07, 0.000978023, 2.0512815e-08, 0.9999995)
bones/28/rotation = Quaternion(0.037080348, 0.0011660997, 0.051848114, 0.9979657)
bones/49/rotation = Quaternion(-0.36685798, -0.66138583, 0.33760098, 0.5603656)
bones/50/rotation = Quaternion(2.5439293e-08, -0.03302221, 2.3501893e-07, 0.9994546)
bones/51/rotation = Quaternion(0.2528928, -0.033022065, 0.008636984, 0.96689206)
bones/52/rotation = Quaternion(8.384188e-08, 0.0009783497, -2.5797002e-07, 0.9999995)
bones/53/rotation = Quaternion(-0.042203844, 0.0008973101, -0.051863834, 0.99776167)
bones/81/rotation = Quaternion(0.9699845, 0.08782032, -0.052406214, 0.22061582)
bones/82/rotation = Quaternion(5.8403124e-08, -0.057814844, 2.6060933e-08, 0.9983273)
bones/83/rotation = Quaternion(0.25649253, -0.0578283, 0.01537523, 0.96469223)
bones/84/rotation = Quaternion(-3.3938047e-08, -0.044200946, 4.474863e-08, 0.99902266)
bones/85/rotation = Quaternion(-0.53431994, -0.008970766, 0.0975795, 0.8395833)
bones/86/rotation = Quaternion(2.4469933e-05, 0.9409069, -0.33866537, -8.127735e-06)
bones/87/rotation = Quaternion(0.9599977, -0.12195004, 0.057819556, 0.2453357)
bones/88/rotation = Quaternion(-2.7217928e-09, 0.054182645, 1.02485e-08, 0.9985311)
bones/89/rotation = Quaternion(0.2906199, 0.054171607, -0.016482126, 0.9551617)
bones/90/rotation = Quaternion(3.787962e-08, 0.02535332, -4.966537e-08, 0.9996786)
bones/91/rotation = Quaternion(-0.56308633, -0.009397293, -0.083796635, 0.8220849)
bones/92/rotation = Quaternion(-1.7379822e-05, 0.94529885, -0.32620564, 5.306298e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchonizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")
move_direction = null
target_angle = null

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
