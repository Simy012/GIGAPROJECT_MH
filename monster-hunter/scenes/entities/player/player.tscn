[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:player_id")
properties/6/spawn = true
properties/6/replication_mode = 0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(-0.019760253, 0.49626687, -0.008377323)
bones/0/rotation = Quaternion(0.124692805, -0.07462832, 0.019456442, 0.9891935)
bones/2/rotation = Quaternion(-0.07727697, -0.04284667, 0.00060360745, 0.99608845)
bones/3/rotation = Quaternion(-0.0015337701, -0.12837975, -0.0029396035, 0.99171954)
bones/4/rotation = Quaternion(0.14722912, 0.08521617, -0.0096852295, 0.9853771)
bones/6/rotation = Quaternion(-0.015783617, 0.085753776, -0.0013586461, 0.9961905)
bones/7/rotation = Quaternion(0.9905022, 0.114249825, 0.01026581, 0.07580972)
bones/8/rotation = Quaternion(0.9904757, -0.11447884, 0.007280341, -0.0761545)
bones/9/rotation = Quaternion(0.8412572, -0.05159106, 0.0329419, 0.5371589)
bones/10/rotation = Quaternion(0.4097286, -0.0098206615, 0.021856824, 0.9118927)
bones/11/rotation = Quaternion(0.8234962, 0.09435606, -0.17818579, 0.5302837)
bones/12/rotation = Quaternion(0.4094406, -0.021449652, 0.024747632, 0.9117489)
bones/13/rotation = Quaternion(0.80579567, -0.19427425, 0.24164735, 0.5045369)
bones/14/rotation = Quaternion(0.40999806, 0.0018088305, 0.018962396, 0.9118875)
bones/15/rotation = Quaternion(-0.34033167, -0.120844, -0.4694441, 0.8057253)
bones/16/rotation = Quaternion(1.7061046e-08, 1.1613146e-07, -0.09572983, 0.99540734)
bones/17/rotation = Quaternion(-0.35586745, 0.06154126, 0.32640526, 0.8735163)
bones/18/rotation = Quaternion(7.860167e-08, -8.601324e-08, -0.09573011, 0.99540734)
bones/19/rotation = Quaternion(-0.40641063, -0.06407639, -0.10656273, 0.90519)
bones/20/rotation = Quaternion(-2.0028307e-07, -3.2030634e-08, -0.0957299, 0.99540734)
bones/21/rotation = Quaternion(-0.41139302, -0.005584683, -0.048071012, 0.91017234)
bones/22/rotation = Quaternion(-2.2243256e-07, 1.1073247e-08, -0.09572993, 0.99540734)
bones/24/rotation = Quaternion(-0.17679681, 0.6216289, -0.53173244, 0.5473399)
bones/25/rotation = Quaternion(9.196144e-08, -0.028283307, 1.2845172e-08, 0.99959993)
bones/26/rotation = Quaternion(0.36412242, -0.028283998, 0.011071697, 0.93085575)
bones/27/rotation = Quaternion(-2.1352474e-07, -0.00043583327, -1.7886808e-07, 1)
bones/28/rotation = Quaternion(-0.019603899, -0.00030885186, 0.05185961, 0.9984619)
bones/49/rotation = Quaternion(-0.35611627, -0.6597515, 0.35264495, 0.559956)
bones/50/rotation = Quaternion(9.964573e-08, -0.028764006, -8.634964e-08, 0.9995863)
bones/51/rotation = Quaternion(0.27222654, -0.028763834, 0.008139753, 0.9617688)
bones/52/rotation = Quaternion(-4.541215e-08, -0.00043576045, -3.509503e-08, 1)
bones/53/rotation = Quaternion(0.014477127, -0.0005778674, -0.051852822, 0.9985497)
bones/81/rotation = Quaternion(0.96333015, 0.13226935, -0.05952721, 0.22573516)
bones/82/rotation = Quaternion(-3.4143742e-08, -0.052398823, 1.4057018e-08, 0.9986263)
bones/83/rotation = Quaternion(0.30053765, -0.052386425, 0.016534233, 0.95218664)
bones/84/rotation = Quaternion(-1.1476051e-08, -0.07846371, 3.201417e-08, 0.996917)
bones/85/rotation = Quaternion(-0.5260621, -0.043448977, 0.13333778, 0.83880395)
bones/86/rotation = Quaternion(2.3717908e-05, 0.9324903, -0.3611952, -8.481269e-06)
bones/87/rotation = Quaternion(0.9717443, -0.07424484, 0.050216693, 0.21835533)
bones/88/rotation = Quaternion(-3.102948e-08, 0.05969598, 1.3621287e-08, 0.9982166)
bones/89/rotation = Quaternion(0.21938096, 0.05972204, -0.013454889, 0.9737168)
bones/90/rotation = Quaternion(-4.934122e-08, -0.0090191895, 3.5202145e-08, 0.9999594)
bones/91/rotation = Quaternion(-0.55615693, -0.043880634, -0.05821453, 0.8278738)
bones/92/rotation = Quaternion(-1.29242235e-05, 0.95286876, -0.30338287, 3.4113264e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")
move_direction = null
target_angle = null

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
