[gd_scene load_steps=14 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath(".:rotation")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath("MovementComponent:current_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("MovementComponent:last_state")
properties/5/spawn = true
properties/5/replication_mode = 2

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:move_direction")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("PlayerInput:target_angle")
properties/1/spawn = true
properties/1/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(0.022808535, 0.49626124, -0.008496134)
bones/0/rotation = Quaternion(0.12556289, 0.08604959, -0.008398432, 0.9883112)
bones/2/rotation = Quaternion(-0.077364035, 0.031306054, -0.00043929738, 0.9965112)
bones/3/rotation = Quaternion(-0.0015951457, 0.0936124, 0.0021429274, 0.9956052)
bones/4/rotation = Quaternion(0.14748496, -0.062093206, 0.007057258, 0.9870881)
bones/6/rotation = Quaternion(-0.015810978, -0.062485263, 0.0009900198, 0.99792016)
bones/7/rotation = Quaternion(0.98966736, 0.11440058, -0.008421196, -0.08602448)
bones/8/rotation = Quaternion(0.9896972, -0.11414183, -0.011404221, 0.085679986)
bones/9/rotation = Quaternion(0.84081894, 0.058298398, -0.03722464, 0.53687906)
bones/10/rotation = Quaternion(0.40980282, -0.005968979, 0.0132845985, 0.91205794)
bones/11/rotation = Quaternion(0.8042207, 0.20069423, -0.24566332, 0.50259376)
bones/12/rotation = Quaternion(0.40962413, -0.017600212, 0.016176578, 0.9119412)
bones/13/rotation = Quaternion(0.82422256, -0.08778566, 0.17395107, 0.5316878)
bones/14/rotation = Quaternion(0.40996292, 0.0056625255, 0.0103903925, 0.9120254)
bones/15/rotation = Quaternion(-0.35837752, -0.04465996, -0.28477216, 0.8879617)
bones/16/rotation = Quaternion(6.401382e-09, 1.1476228e-07, 0.026356323, 0.9996527)
bones/17/rotation = Quaternion(-0.33424258, 0.13678776, 0.50698566, 0.7826472)
bones/18/rotation = Quaternion(3.563648e-08, -1.03263005e-07, 0.026356181, 0.9996527)
bones/19/rotation = Quaternion(-0.41066986, 0.025014337, 0.091017626, 0.90688497)
bones/20/rotation = Quaternion(-1.8057955e-07, -9.612839e-09, 0.026356246, 0.9996527)
bones/21/rotation = Quaternion(-0.4029297, 0.08320537, 0.14920865, 0.8991448)
bones/22/rotation = Quaternion(-2.1682082e-07, 2.9100958e-08, 0.026356291, 0.9996527)
bones/24/rotation = Quaternion(-0.31331682, 0.65230364, -0.4064077, 0.5578219)
bones/25/rotation = Quaternion(1.9263577e-08, 0.013395545, -9.5010414e-08, 0.9999103)
bones/26/rotation = Quaternion(0.218773, 0.013387601, -0.0029774571, 0.97567946)
bones/27/rotation = Quaternion(2.008854e-08, 0.0006975745, 1.9304713e-07, 0.99999976)
bones/28/rotation = Quaternion(0.047768697, 0.001444422, 0.051845748, 0.997511)
bones/49/rotation = Quaternion(-0.2299421, -0.6345784, 0.48967502, 0.5519559)
bones/50/rotation = Quaternion(-1.747015e-09, 0.013291155, -2.3175069e-08, 0.99991167)
bones/51/rotation = Quaternion(0.27673292, 0.013132448, -0.0038186077, 0.9608496)
bones/52/rotation = Quaternion(-2.4621235e-07, 0.0006976439, 1.4286375e-07, 0.99999976)
bones/53/rotation = Quaternion(-0.05288994, 0.001175788, -0.05186592, 0.99725187)
bones/81/rotation = Quaternion(0.97655046, 0.05315836, -0.04682217, 0.20330063)
bones/82/rotation = Quaternion(-1.8440383e-08, -0.06100845, -2.9172229e-08, 0.9981373)
bones/83/rotation = Quaternion(0.18700671, -0.061599817, 0.01175058, 0.980355)
bones/84/rotation = Quaternion(4.119512e-09, 0.014102965, 4.23397e-08, 0.9999006)
bones/85/rotation = Quaternion(-0.54616445, 0.04908648, 0.055930134, 0.834366)
bones/86/rotation = Quaternion(1.2416534e-05, 0.95389575, -0.30013832, -3.2091127e-06)
bones/87/rotation = Quaternion(0.9591354, -0.15103431, 0.062500246, 0.2309581)
bones/88/rotation = Quaternion(2.772598e-08, 0.050767146, -3.9758312e-08, 0.9987105)
bones/89/rotation = Quaternion(0.31717762, 0.049893346, -0.016712528, 0.9469053)
bones/90/rotation = Quaternion(-8.337172e-09, 0.084091716, 5.711893e-10, 0.99645805)
bones/91/rotation = Quaternion(-0.5283178, 0.049421214, -0.14165841, 0.83568585)
bones/92/rotation = Quaternion(-3.2666267e-05, 0.9312684, -0.3643341, 1.2073509e-05)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchonizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("movement_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
movement_component = NodePath("../MovementComponent")
move_direction = null
target_angle = null

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
