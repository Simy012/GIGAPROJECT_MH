[gd_scene load_steps=15 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]
[ext_resource type="Script" uid="uid://rn8c8atd6bi2" path="res://scripts/components/LevelComponent/level_component.gd" id="11_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:player_id")
properties/6/spawn = true
properties/6/replication_mode = 0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:input_data")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("CamPivot/SpringArm3D/Camera3D:position")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("CamPivot/SpringArm3D/Camera3D:rotation")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("PlayerInput:camera_global_basis")
properties/3/spawn = true
properties/3/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("movement_component", "status_component", "camera_component", "inventory_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
movement_component = NodePath("MovementComponent")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
inventory_component = NodePath("InventoryComponent")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(-0.023326794, 0.49626097, -0.008485025)
bones/0/rotation = Quaternion(0.12549989, -0.08612404, 0.009134551, 0.98830616)
bones/2/rotation = Quaternion(-0.07735772, -0.032281823, 0.00045316425, 0.9964806)
bones/3/rotation = Quaternion(-0.0015907042, -0.09652225, -0.0022096136, 0.9953271)
bones/4/rotation = Quaternion(0.14746657, 0.06402678, -0.007277048, 0.9869658)
bones/6/rotation = Quaternion(-0.015808975, 0.0644307, -0.0010207735, 0.9977965)
bones/7/rotation = Quaternion(0.989683, 0.114139944, 0.011423297, 0.08584524)
bones/8/rotation = Quaternion(0.98965305, -0.114399165, 0.008440293, -0.08618972)
bones/9/rotation = Quaternion(0.84081113, -0.05841071, 0.037296403, 0.5368742)
bones/10/rotation = Quaternion(0.40981492, 0.0050689853, -0.011281513, 0.9120849)
bones/11/rotation = Quaternion(0.8242343, 0.08767551, -0.1738801, 0.53171104)
bones/12/rotation = Quaternion(0.4099495, -0.0065628607, -0.008387418, 0.9120461)
bones/13/rotation = Quaternion(0.8041939, -0.20080173, 0.24573047, 0.502561)
bones/14/rotation = Quaternion(0.4096618, 0.016700555, -0.014173788, 0.9119745)
bones/15/rotation = Quaternion(-0.33447224, -0.13622524, -0.50566816, 0.783499)
bones/16/rotation = Quaternion(4.7545246e-08, 1.3381113e-07, -0.03071045, 0.99952835)
bones/17/rotation = Quaternion(-0.35830185, 0.045262847, 0.28626576, 0.88748133)
bones/18/rotation = Quaternion(-3.362762e-09, -1.0939348e-07, -0.030710604, 0.99952835)
bones/19/rotation = Quaternion(-0.40306914, -0.082527325, -0.14769566, 0.89939463)
bones/20/rotation = Quaternion(-1.8840143e-07, -5.0438192e-08, -0.030710518, 0.99952835)
bones/21/rotation = Quaternion(-0.41071132, -0.024323374, -0.08949174, 0.9070368)
bones/22/rotation = Quaternion(-1.7590641e-07, 1.9329898e-08, -0.030710505, 0.9995283)
bones/24/rotation = Quaternion(-0.2265066, 0.6337781, -0.4926165, 0.5516785)
bones/25/rotation = Quaternion(6.425103e-08, -0.014290919, 5.0001194e-08, 0.99989796)
bones/26/rotation = Quaternion(0.2875359, -0.014291328, 0.0043009557, 0.95765364)
bones/27/rotation = Quaternion(-1.780128e-07, -0.0010756631, -1.5413609e-07, 0.9999995)
bones/28/rotation = Quaternion(-0.05129577, -0.0011343139, 0.05186576, 0.9973352)
bones/49/rotation = Quaternion(-0.31629175, -0.65286607, 0.40294707, 0.5579956)
bones/50/rotation = Quaternion(4.8469957e-08, -0.014289883, -1.18299006e-07, 0.99989796)
bones/51/rotation = Quaternion(0.28887847, -0.014289908, 0.004310643, 0.9572495)
bones/52/rotation = Quaternion(-7.248963e-08, -0.0010754702, 1.1435373e-08, 0.9999995)
bones/53/rotation = Quaternion(0.04617434, -0.0014030148, -0.051846117, 0.9975861)
bones/81/rotation = Quaternion(0.959371, 0.15049033, -0.062415563, 0.23035705)
bones/82/rotation = Quaternion(-4.95817e-09, -0.050123572, -2.9031618e-08, 0.99874306)
bones/83/rotation = Quaternion(0.31624395, -0.049977258, 0.016685711, 0.9472137)
bones/84/rotation = Quaternion(3.1930835e-08, -0.084327586, 1.7136982e-08, 0.99643815)
bones/85/rotation = Quaternion(-0.5277152, -0.04958992, 0.14186743, 0.83602107)
bones/86/rotation = Quaternion(3.3736582e-05, 0.93126935, -0.3643315, -1.2501765e-05)
bones/87/rotation = Quaternion(0.97641957, -0.053727727, 0.04691415, 0.20375782)
bones/88/rotation = Quaternion(-8.43881e-08, 0.061172158, 3.008044e-08, 0.9981272)
bones/89/rotation = Quaternion(0.1879517, 0.06155279, -0.011802968, 0.9801767)
bones/90/rotation = Quaternion(-2.4493607e-08, -0.014386455, -7.2412654e-09, 0.9998966)
bones/91/rotation = Quaternion(-0.5466437, -0.04956537, -0.05551574, 0.8340515)
bones/92/rotation = Quaternion(-1.2237107e-05, 0.9538959, -0.3001379, 3.1605227e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("camera_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
camera_component = NodePath("../CamPivot")

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[node name="LevelComponent" type="Node" parent="."]
script = ExtResource("11_7wli1")
metadata/_custom_type_script = "uid://rn8c8atd6bi2"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
