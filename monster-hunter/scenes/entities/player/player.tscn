[gd_scene load_steps=15 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]
[ext_resource type="Script" uid="uid://rn8c8atd6bi2" path="res://scripts/components/LevelComponent/level_component.gd" id="11_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("MovementComponent:current_state")
properties/1/spawn = true
properties/1/replication_mode = 2
properties/2/path = NodePath("MovementComponent:last_state")
properties/2/spawn = true
properties/2/replication_mode = 2
properties/3/path = NodePath("Body:rotation")
properties/3/spawn = true
properties/3/replication_mode = 1
properties/4/path = NodePath(".:player_id")
properties/4/spawn = true
properties/4/replication_mode = 0
properties/5/path = NodePath("MovementComponent:stamina")
properties/5/spawn = true
properties/5/replication_mode = 2
properties/6/path = NodePath("MovementComponent:max_stamina")
properties/6/spawn = true
properties/6/replication_mode = 2

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:input_data")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("CamPivot/SpringArm3D/Camera3D:position")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("CamPivot/SpringArm3D/Camera3D:rotation")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("PlayerInput:camera_global_basis")
properties/3/spawn = true
properties/3/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("status_component", "camera_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(0.02097618, 0.4962641, -0.0083843935)
bones/0/rotation = Quaternion(0.124782905, 0.078819714, -0.017889688, 0.9888866)
bones/2/rotation = Quaternion(-0.077284954, 0.04192051, -0.00059037737, 0.99612725)
bones/3/rotation = Quaternion(-0.0015401662, 0.12522295, 0.0028672165, 0.99212337)
bones/4/rotation = Quaternion(0.14725569, -0.08311429, 0.00944649, 0.98555505)
bones/6/rotation = Quaternion(-0.015786283, -0.08363907, 0.0013251355, 0.99637026)
bones/7/rotation = Quaternion(0.9901654, 0.11444904, -0.007734997, -0.08008796)
bones/8/rotation = Quaternion(0.99019325, -0.114208154, -0.010719526, 0.07974326)
bones/9/rotation = Quaternion(0.8410889, 0.054263923, -0.034648556, 0.53705156)
bones/10/rotation = Quaternion(0.4097845, 0.007116391, -0.015838288, 0.9120171)
bones/11/rotation = Quaternion(0.8051742, 0.19683371, -0.24324931, 0.5037666)
bones/12/rotation = Quaternion(0.40997714, -0.0045145554, -0.012943953, 0.9119927)
bones/13/rotation = Quaternion(0.82379186, -0.09173892, 0.17649987, 0.53084713)
bones/14/rotation = Quaternion(0.40957326, 0.018747073, -0.018729996, 0.9118923)
bones/15/rotation = Quaternion(-0.35650894, -0.057709035, -0.31698826, 0.87697756)
bones/16/rotation = Quaternion(3.8559243e-08, 9.0773504e-08, 0.08502685, 0.9963787)
bones/17/rotation = Quaternion(-0.33901185, 0.12449861, 0.47808564, 0.800628)
bones/18/rotation = Quaternion(-1.0767914e-08, -1.2174704e-07, 0.08502663, 0.9963788)
bones/19/rotation = Quaternion(-0.41130915, 0.010010474, 0.05786066, 0.9096026)
bones/20/rotation = Quaternion(-2.0549875e-07, -1.7076019e-08, 0.08502671, 0.99637866)
bones/21/rotation = Quaternion(-0.4056978, 0.068445206, 0.11629538, 0.90399116)
bones/22/rotation = Quaternion(-1.7487788e-07, 3.051315e-08, 0.08502671, 0.99637866)
bones/24/rotation = Quaternion(-0.35026774, 0.6588184, -0.36054924, 0.55970985)
bones/25/rotation = Quaternion(5.230902e-08, 0.026923634, -2.214831e-07, 0.9996376)
bones/26/rotation = Quaternion(0.14676926, 0.026924362, -0.0039876243, 0.98879623)
bones/27/rotation = Quaternion(6.7933364e-08, 0.00043939403, 2.6967083e-07, 1)
bones/28/rotation = Quaternion(0.020989934, 0.0007473148, 0.051851496, 0.998434)
bones/49/rotation = Quaternion(-0.18458232, -0.6235943, 0.52602047, 0.5480529)
bones/50/rotation = Quaternion(4.2135795e-08, 0.02647094, -1.377322e-07, 0.99964964)
bones/51/rotation = Quaternion(0.2910664, 0.026471026, -0.008058826, 0.95630264)
bones/52/rotation = Quaternion(-3.642886e-07, 0.00043934313, 2.6862685e-07, 1)
bones/53/rotation = Quaternion(-0.026115965, 0.00047833897, -0.051860992, 0.99831265)
bones/81/rotation = Quaternion(0.97291744, 0.06941428, -0.049441576, 0.21486981)
bones/82/rotation = Quaternion(1.1488111e-08, -0.060160812, -4.8593275e-08, 0.9981888)
bones/83/rotation = Quaternion(0.2115416, -0.060187206, 0.013052268, 0.97542673)
bones/84/rotation = Quaternion(-2.5917375e-08, 0.01122489, -3.9069057e-08, 0.99993706)
bones/85/rotation = Quaternion(-0.5542995, 0.046108723, 0.057029594, 0.8290801)
bones/86/rotation = Quaternion(1.1682006e-05, 0.9533476, -0.3018747, -2.9800146e-06)
bones/87/rotation = Quaternion(0.96258736, -0.13650802, 0.060201988, 0.22620091)
bones/88/rotation = Quaternion(-1.43690055e-08, 0.051843155, 2.2096232e-08, 0.9986553)
bones/89/rotation = Quaternion(0.30403122, 0.051843006, -0.016571049, 0.9511061)
bones/90/rotation = Quaternion(1.5189705e-08, 0.080753006, -2.9300926e-08, 0.99673414)
bones/91/rotation = Quaternion(-0.52566147, 0.04574672, -0.13612963, 0.8384844)
bones/92/rotation = Quaternion(-3.083075e-05, 0.93192285, -0.36265683, 1.1317195e-05)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("camera_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
camera_component = NodePath("../CamPivot")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[node name="LevelComponent" type="Node" parent="."]
script = ExtResource("11_7wli1")
metadata/_custom_type_script = "uid://rn8c8atd6bi2"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
