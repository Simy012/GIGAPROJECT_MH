[gd_scene load_steps=15 format=3 uid="uid://dp27wfbklu6ap"]

[ext_resource type="Script" uid="uid://b48bhegka3thj" path="res://scripts/entities/player/player.gd" id="1_7tlpx"]
[ext_resource type="PackedScene" uid="uid://prh35jb6tjtd" path="res://scenes/entities/player/sophia/sophia_skin/sophia_skin.tscn" id="2_58kc7"]
[ext_resource type="Script" uid="uid://d3rygij8tftl7" path="res://scripts/entities/player/camera_3D_component.gd" id="3_8akj5"]
[ext_resource type="Script" uid="uid://cm3mjw2illnxy" path="res://scripts/entities/player/movement_component.gd" id="3_bjvvg"]
[ext_resource type="Script" uid="uid://dnmnodlwabeg2" path="res://scripts/entities/player/player_input.gd" id="4_7wli1"]
[ext_resource type="Script" uid="uid://dfwrsk7mbf3c3" path="res://scripts/entities/player/status_effect_component.gd" id="4_8akj5"]
[ext_resource type="Script" uid="uid://0gp3a0yowc61" path="res://scripts/components/InventoryComponent/inventory.gd" id="7_bj7e2"]
[ext_resource type="Script" uid="uid://casey4mh5rjva" path="res://scripts/components/InventoryComponent/equipment_manager.gd" id="8_1murt"]
[ext_resource type="Script" uid="uid://cv5mgn7jkcqbc" path="res://scripts/components/HealthComponent/health_component.gd" id="9_ovg4i"]
[ext_resource type="Script" uid="uid://dp6wcvdh3b3vi" path="res://scripts/components/HitboxComponent/HitboxComponent.gd" id="10_7wli1"]
[ext_resource type="Script" uid="uid://rn8c8atd6bi2" path="res://scripts/components/LevelComponent/level_component.gd" id="11_7wli1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j0oqr"]
radius = 0.21484375

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_j0oqr"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("HealthComponent:max_health")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("HealthComponent:current_health")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("MovementComponent:current_state")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("MovementComponent:last_state")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath("Body:rotation")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:player_id")
properties/6/spawn = true
properties/6/replication_mode = 0
properties/7/path = NodePath("MovementComponent:stamina")
properties/7/spawn = true
properties/7/replication_mode = 1
properties/8/path = NodePath("MovementComponent:max_stamina")
properties/8/spawn = true
properties/8/replication_mode = 1

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xy2vv"]
properties/0/path = NodePath("PlayerInput:input_data")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath("CamPivot/SpringArm3D/Camera3D:position")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("CamPivot/SpringArm3D/Camera3D:rotation")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("PlayerInput:camera_global_basis")
properties/3/spawn = true
properties/3/replication_mode = 1

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("status_component", "camera_component", "equipment_manager_component")]
collision_layer = 2
collision_mask = 3
script = ExtResource("1_7tlpx")
status_component = NodePath("StatusEffectComponent")
camera_component = NodePath("CamPivot")
equipment_manager_component = NodePath("EquipmentManagerComponent")

[node name="Body" type="Node3D" parent="."]

[node name="SophiaSkin" parent="Body" instance=ExtResource("2_58kc7")]

[node name="Skeleton3D" parent="Body/SophiaSkin/sophia/rig" index="0"]
bones/0/position = Vector3(0.02045573, 0.49626535, -0.008379528)
bones/0/rotation = Quaternion(0.124731526, 0.077041216, -0.018671656, 0.98901874)
bones/2/rotation = Quaternion(-0.07727974, 0.042539828, -0.0005992537, 0.9961014)
bones/3/rotation = Quaternion(-0.0015365321, 0.12706399, 0.0029094545, 0.99188906)
bones/4/rotation = Quaternion(0.14724033, -0.08433993, 0.009585778, 0.9854518)
bones/6/rotation = Quaternion(-0.015784621, -0.08487245, 0.0013446792, 0.99626595)
bones/7/rotation = Quaternion(0.99029785, 0.1144618, -0.007543762, -0.078433596)
bones/8/rotation = Quaternion(0.9903251, -0.114225924, -0.010528698, 0.07808887)
bones/9/rotation = Quaternion(0.8411608, 0.053139742, -0.033930738, 0.53709733)
bones/10/rotation = Quaternion(0.40976006, 0.008408742, -0.018714579, 0.9119627)
bones/11/rotation = Quaternion(0.8054367, 0.1957574, -0.24257582, 0.50409114)
bones/12/rotation = Quaternion(0.4099894, -0.0032215193, -0.015820138, 0.9119474)
bones/13/rotation = Quaternion(0.8236685, -0.09283987, 0.17720926, 0.53061086)
bones/14/rotation = Quaternion(0.40951216, 0.020038694, -0.02160587, 0.91182864)
bones/15/rotation = Quaternion(-0.35622394, -0.059442904, -0.32125136, 0.8754249)
bones/16/rotation = Quaternion(5.655994e-08, 9.79954e-08, 0.09027579, 0.9959168)
bones/17/rotation = Quaternion(-0.3396135, 0.122847736, 0.4741847, 0.8029446)
bones/18/rotation = Quaternion(-2.5579794e-09, -1.2320241e-07, 0.090275526, 0.99591684)
bones/19/rotation = Quaternion(-0.41135302, 0.0080091795, 0.05343442, 0.90987337)
bones/20/rotation = Quaternion(-2.0141995e-07, -2.8749051e-08, 0.09027563, 0.99591684)
bones/21/rotation = Quaternion(-0.40602586, 0.06647052, 0.111895755, 0.90454626)
bones/22/rotation = Quaternion(-2.0379073e-07, 4.2717346e-08, 0.090275675, 0.99591684)
bones/24/rotation = Quaternion(-0.35321647, 0.65928906, -0.35660177, 0.5598315)
bones/25/rotation = Quaternion(1.2158883e-07, 0.028061477, -2.9946358e-07, 0.9996062)
bones/26/rotation = Quaternion(0.1402702, 0.028061606, -0.003976182, 0.98970765)
bones/27/rotation = Quaternion(7.275298e-08, 0.00041338633, 2.7738946e-07, 1)
bones/28/rotation = Quaternion(0.017964205, 0.00066857133, 0.051851872, 0.998493)
bones/49/rotation = Quaternion(-0.18069403, -0.62261134, 0.52890116, 0.54769367)
bones/50/rotation = Quaternion(9.1520995e-08, 0.02757052, -1.3032611e-08, 0.99961996)
bones/51/rotation = Quaternion(0.29248872, 0.027570684, -0.00843682, 0.9558342)
bones/52/rotation = Quaternion(-3.7618295e-07, 0.00041332335, 2.812955e-07, 1)
bones/53/rotation = Quaternion(-0.023090456, 0.00039952368, -0.05186014, 0.9983873)
bones/81/rotation = Quaternion(0.9723794, 0.071613856, -0.049794633, 0.21649572)
bones/82/rotation = Quaternion(1.625786e-08, -0.059929192, -3.1536242e-08, 0.9982027)
bones/83/rotation = Quaternion(0.2151572, -0.059978902, 0.013240704, 0.9746459)
bones/84/rotation = Quaternion(-2.8117146e-08, 0.010303501, -7.044099e-08, 0.999947)
bones/85/rotation = Quaternion(-0.55520856, 0.045176413, 0.057498783, 0.8284905)
bones/86/rotation = Quaternion(1.1198993e-05, 0.9531431, -0.30252, -2.8276486e-06)
bones/87/rotation = Quaternion(0.9629266, -0.13459647, 0.059897773, 0.22598334)
bones/88/rotation = Quaternion(-2.1020194e-08, 0.052083727, 3.2010917e-08, 0.9986428)
bones/89/rotation = Quaternion(0.3025146, 0.052083354, -0.016557874, 0.95157665)
bones/90/rotation = Quaternion(1.869657e-08, 0.07978611, -2.6234975e-08, 0.996812)
bones/91/rotation = Quaternion(-0.52580196, 0.044776395, -0.13492966, 0.83864266)
bones/92/rotation = Quaternion(-2.3470771e-05, 0.9321567, -0.36205518, 8.404633e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.079733, 0, 0, 0, 0.83166194, 0, 0, 0, 0.8160704, 0, 0.7753521, 0.019782364)
shape = SubResource("CapsuleShape3D_j0oqr")

[node name="CamPivot" type="Node3D" parent="." node_paths=PackedStringArray("camera")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.2033095, 1.5, 0)
script = ExtResource("3_8akj5")
camera = NodePath("SpringArm3D/Camera3D")

[node name="SpringArm3D" type="SpringArm3D" parent="CamPivot"]
transform = Transform3D(1, 0, 0, 0, 0.9722394, 0.2339884, 0, -0.2339884, 0.9722394, 0, 0.14975573, 0.6222464)

[node name="Camera3D" type="Camera3D" parent="CamPivot/SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.4703484e-08, 0.8544715)

[node name="ServerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_j0oqr")

[node name="PlayerInput" type="MultiplayerSynchronizer" parent="." node_paths=PackedStringArray("camera_component")]
replication_config = SubResource("SceneReplicationConfig_xy2vv")
script = ExtResource("4_7wli1")
camera_component = NodePath("../CamPivot")

[node name="MovementComponent" type="Node" parent="." node_paths=PackedStringArray("character", "camera_component", "status_component", "_skin", "_body")]
script = ExtResource("3_bjvvg")
character = NodePath("..")
camera_component = NodePath("../CamPivot")
status_component = NodePath("../StatusEffectComponent")
_skin = NodePath("../Body/SophiaSkin")
_body = NodePath("../Body")

[node name="StatusEffectComponent" type="Node" parent="."]
script = ExtResource("4_8akj5")

[node name="InventoryComponent" type="Node" parent="."]
script = ExtResource("7_bj7e2")

[node name="EquipmentManagerComponent" type="Node" parent="." node_paths=PackedStringArray("player_node")]
script = ExtResource("8_1murt")
player_node = NodePath("..")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("9_ovg4i")
max_health = 100.0
current_health = 100.0
metadata/_custom_type_script = "uid://cv5mgn7jkcqbc"

[node name="HitboxComponent" type="Area3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("10_7wli1")
metadata/_custom_type_script = "uid://dp6wcvdh3b3vi"

[node name="LevelComponent" type="Node" parent="."]
script = ExtResource("11_7wli1")
metadata/_custom_type_script = "uid://rn8c8atd6bi2"

[editable path="Body/SophiaSkin"]
[editable path="Body/SophiaSkin/sophia"]
